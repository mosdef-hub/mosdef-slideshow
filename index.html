<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=1024"/>
    <meta name="apple-mobile-web-app-capable" content="yes">

    <title>MoSDeF Slideshow | Interactive slides demonstrating the capabilities of the MoSDeF framework</title>

    <meta name="author" content="Cal Cavern, Umesh Timalsina"/>
    <link href="css/impress-demo.css" rel="stylesheet"/>
    <link href="css/impress-common.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:regular,semibold,italic,italicsemibold|PT+Sans:400,700,400italic,700italic|PT+Serif:400,700,400italic,700italic"
          rel="stylesheet"/>
    <link rel="shortcut icon" href="favicon.ico"/>
    <style>
        #mol-container > canvas {
            width: 300px;
            height: 300px;
            border: 5px solid black;
        }

        .mosdef-container {
            height: 100%;
            background: #F0F0F0;
            border-bottom-right-radius: 50px;
            border-top-left-radius: 50px;
            border: 5px solid #E1AD01;
        }

        table,
        td {
            border: 1px solid #333;
            font-size: 18px;
        }

        tbody > tr {
            line-height: 20px;
        }

        thead > tr {
            line-height: 50px;
        }

        thead,
        tfoot {
            background-color: #333;
            color: #fff;
            font-size: 30px;
        }
    </style>
</head>

<body class="impress-not-supported">

<div class="fallback-message">
    <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a simplified
        version of this presentation.</p>
    <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
</div>

<div id="impress"
     data-transition-duration="1000"
     data-width="1024"
     data-height="768"
     data-max-scale="3"
     data-min-scale="0"
     data-perspective="1000">

    <!-- Slide 1   -->
    <div id="welcome" class="step" data-x="-1000" data-y="-1000" data-z="2000" data-autoplay="10" data-scale="2">
        <h1>Welcome to <a href="https://mosdef.org" target="_blank">MoSDeF</a> <b>Slideshow</b></h1>
    </div>

    <div id="here" class="step" data-x="-1000" data-y="-1000" data-z="1000" data-autoplay="10" data-scale="2">
        <q>Here we present an overview of  <a href="https://mosdef.org" target="_blank">MoSDeF</a> Framework capabilities</q>
    </div>

    <div id="mbuild" class="step slide" style="z-index: 100;" data-x="0" data-y="0" data-scale="2">
        <div class="mosdef-container">
            <div class="mosdef-title" style="text-align: center; padding: 50px;">
                <h1><u>mBuild</u></h1>
            </div>
            <div class="mosdef-float-left" style="padding: 50px;">
                <div class="mosdef-float-right">
                    <div id="mol-container" style="width: 350px; height: 350px; float: right;">
                    </div>
                </div>
                <ul>
                    <li style="margin-top: 50px"><h3>Build Molecules</h3></li>
                    <li style="margin-top: 50px"><h3>Add Connectivity</h3></li>
                    <li style="margin-top: 50px"><h3>Fill a simulation Box</h3></li>
                </ul>
            </div>
        </div>
        <img id="workflow-image" src="images/mosdef-workflow.png" width="350" alt="workflow" style="display: none; margin-top: -150px; margin-left: 675px"/>
    </div>

    <div id="foyer" class="step slide" data-x="1800" data-y="0" data-scale="2">
        <div class="mosdef-container" style="text-align: center">
            <div style="padding: 50px;">
                <h1><u>Foyer</u></h1>
            </div>
            <div class="mosdef-float-right">
                <img src="images/foyer-molecule.png" height="265"/>
                <img src="images/foyer-smarts.png" width="424" height="265"/>
            </div>
            <ul>
                <li><h3><code>XML</code> based Forcefields</cod></h3></li>
                <li style="margin-top: 50px"><h3>Robust Overrides Mechanism</h3></li>
            </ul>
        </div>
    </div>

    <div id="gmso" class="step slide" data-x="1800" data-y="1400" data-scale="2">
        <div class="mosdef-container">
            <div style="padding: 50px; text-align: center">
                <h1><u>GMSO</u></h1>
                <h2>View, Edit, and Save your Parameterized System</h2>
            </div>
            <div class="mosdef-float-right" style="float:left; margin-left: 30px">
                <img src="images/gmso-graphics.png" width="312" height="255"/>
            </div>
            <ul style="padding-left: 320px;">
                <li style="margin-top: 50px; margin-left: 50px"><h3>Supports Arbitrary Potential forms</h3></li>
                <li style="margin-top: 50px; margin-left: 50px;"><h3>Parameters stored with Units</h3></li>
            </ul>
            <div class="gmso-table1" style="width: 100%;">
                <table style="margin-left: 30px; margin-top: 60px;">
                    <thead>
                    <tr>
                        <th colspan="2" style="background: #E1AD01"><u><b>AtomTypes</b></u></th>
                        <th colspan="2" style="background: maroon;"><u><b>BondTypes</b></u></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>Index</td>
                        <td>O(0)</td>
                        <td>Index</td>
                        <td>0</td>
                    </tr>
                    <tr>
                        <td>Type</td>
                        <td><code>opls 268</code></td>
                        <td>Atom1</td>
                        <td>O(0)</td>
                    </tr>
                    <tr>
                        <td>Sigma</td>
                        <td>3.0 <span>&#8491;</span></td>
                        <td>Atom2</td>
                        <td>C(1)</td>
                    </tr>
                    <tr>
                        <td>Charge</td>
                        <td>0.53 q</td>
                        <td>r_eq</td>
                        <td>1.364 <span>&#8491;</span></td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>
    <div id="simulationEngines" class="step slide" data-x="0" data-y="1400" data-scale="2">
        <div class="mosdef-container">
            <div style="padding: 50px; text-align: center">
                <h1><u>Simulation Engines</u></h1>
                <h2>Support For Common MD and MC Simulation Engines</h2>
            </div>
            <div class="mosdef-float-right" style="float:left; margin-left: 30px">
                <img src="images/hoomd.png" style="margin-left: 50px;" width="214" height="131" alt="hoomd.png"/>
                <img src="images/cassandra.png" style="margin-left: 50px;" width="115" height="134"
                     alt="cassandra.png"/>
                <img src="images/gomc.png" width="150" style="margin-left: 50px;" height="150" alt="gomc.png"/>
                <br/>
                <img src="images/lammps.png" style="margin-top: 50px; margin-left: 50px" width="237" height="58"
                     alt="lammps.png"/>
                <img src="images/gromacs.jpg" style="margin-left: 50px" alt="gromacs.jpg"/>

            </div>

        </div>
    </div>
    <div id="overview" class="step" data-x="1000" data-y="700" data-scale="4"></div>

</div>

<script src="js/impress.min.js"></script>
<script src="js/3Dmol-min.js"></script>
<script>impress().init();</script>
<script>
    const rootElement = document.getElementById("impress");
    let viewer;
    const drawMolecule = () => {
        const molContainer = document.getElementById('mol-container', {
                id: 'molViewerCanvas',
            });
            if (viewer) {
                return;
            }
            const config = {backgroundColor: '#F0F0F0'};
            viewer = $3Dmol.createViewer(molContainer, config);
            fetch('benzoic_acid.mol2')
                .then(response => response.text())
                .then(data => {
                    const canvas = document.getElementById('undefined');
                    canvas.style.position = 'relative';  // FIXME: the canvas id is always undefined
                    canvas.style.width = '350px';
                    canvas.style.height = '350px';
                    viewer.addModel(data, 'mol2');
                    viewer.setStyle({}, {
                        stick: {"radius": 0.2, "color": "grey"},
                        sphere: {"scale": 0.3},
                    });
                    viewer.zoomTo();
                    viewer.render();
                    viewer.zoom(0.8, 2000);
                }).catch((e) => {
                console.log(e)
            });
    };
    rootElement.addEventListener("impress:stepenter", event => {
        if (event.target.id === "mbuild") {
            drawMolecule();
        }
    });

    rootElement.addEventListener('impress:stepleave', event => {
        const deck = document.querySelectorAll(".impress-enabled .step");
        const summaryImage = document.getElementById('workflow-image');
        const nextStep = event.detail.next;
        deck.forEach(slide => {
            if(nextStep.id === "overview"){
                slide.style.opacity = 1;
                summaryImage.style.display = 'block';
            } else {
                slide.style.opacity = 0;
                summaryImage.style.display = 'none';
            }
        });
        nextStep.style.opacity = 1;
    });
    document.addEventListener('DOMContentLoaded', event => {
        const summaryImage = document.getElementById('workflow-image');
        const body = document.getElementsByTagName('body')[0];
        if(body.className.includes('impress-on-overview')) {
            const deck = document.querySelectorAll(".impress-enabled .step");
            deck.forEach(slide => {
                slide.style.opacity = 1;
            });
            drawMolecule();
            summaryImage.style.display = 'block';
        }

    });
</script>
</body>
</html>
